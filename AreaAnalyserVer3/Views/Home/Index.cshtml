@{
    ViewBag.Title = "Home Page";
}

<div class="container">
    <h1>Welcome to the Arealyser</h1>
    <p class="lead">Use the arealyser to research and analyse your chosen area.</p>
    <div class="row">
       @using (Html.BeginForm())
            {
        <div class="col-md-4">@Html.DropDownList("County", (SelectList)ViewBag.County, "Choose county...", new { @class = "form-control" })</div>
        <div class="col-md-4">@Html.DropDownList("TownID", (SelectList)ViewBag.TownID, new { @class = "form-control" })</div>
                <br />
                <input type="submit" value="Arealyse" />
       }
    </div>

    <div id="dvMap" style="width: 500px; height: 500px">
    </div>
</div>

<script type="text/javascript">
        // cascading dropdown list for towns by county
        $("#County").change(function () {
            $("#TownID").empty();

            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetTowns")',
                dataType: 'json',
                data: { county: $("#County").val() },
                success: function (townList) {

                    $.each(townList, function (i, locale) {
                        $("#TownID").append('<option value ="'
                        + locale.TownId + '">'
                            + locale.Name + ' </option>');
                    });
                },
                error: function (ex) {
                    alert('Failed' + ex);
                }
            });
            return false;
        })


</script>

<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
        window.onload = function () {
            var mapOptions = {
                center: new google.maps.LatLng(53.1424, -7.6921),
                zoom: 7,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var infoWindow = new google.maps.InfoWindow();
            var latlngbounds = new google.maps.LatLngBounds();
            var map = new google.maps.Map(document.getElementById("dvMap"), mapOptions);
            google.maps.event.addListener(map, 'click', function (e) {
                alert("Latitude: " + e.latLng.lat() + "\r\nLongitude: " + e.latLng.lng());
            });
        }
</script>





